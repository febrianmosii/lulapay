url        = "/transaction/simulator"
layout     = "default"
title      = "Transaction Simulator"
meta_title = "Lulapay Transaction Simulator"
meta_description = "Simulate your transaction using Lulapay API here."

[simulator]
==
<div class="card simulator">
  <div class="card-body checkout">
    <div class="container">
      <h3>Gasmaj - Checkout Simulator</h3>
      <form id="invoiceForm" data-request="simulator::onSubmit" data-request-success="redirectSuccess" method="POST" data-request-flash>
        <div class="mb-3">
          <label for="invoiceCode" class="form-label">Invoice Code</label>
          <div class="row">
            <div class="col-md-8 col-sm-8 col-xs-8">
              <input type="text" class="form-control" id="invoiceCode" name="invoice_code" readonly>
            </div>
            <div class="col-md-4 col-sm-4 col-xs-4 btn-generate">
              <a class="generate-invoice btn btn-primary"><i class="fa fa-refresh"></i> Generate</a>
            </div>
          </div>
        </div>
        <div class="mb-3">
          <label for="name" class="form-label">Merchant (Mushola / Masjid)</label>
          <select class="form-select mb-2" name="merchant_id" required>
            <option value="" selected>Select merchant</option>
            {% for merchant in merchants %}
              <option value="{{ merchant.id }}">{{ merchant.name }}</option>
            {% endfor %}
          </select>
        </div>
        <div class="mb-3">
          <label for="name" class="form-label">Name</label>
          <input type="text" class="form-control" id="name" name="name" value="Random Person" required>
        </div>
        <div class="mb-3">
          <label for="email" class="form-label">Email</label>
          <input type="email" class="form-control" id="email" name="email" value="" required>
        </div>
        <div class="mb-3">
          <label for="phone" class="form-label">Phone</label>
          <input type="tel" class="form-control" id="phone" name="phone" value="082112345678" required>
        </div>
        <div id="itemsContainer">
          <div class="mb-3 item">
            <label for="item1" class="form-label">Item</label>
            <select class="form-select item-name mb-2" name="item_name" required>
              <option value="" selected>Select an item</option>
              <option value="Infaq Yatim Piatu">Infaq Yatim Piatu</option>
              <option value="Sedekah Rakyat Miskin">Sedekah Rakyat Miskin</option>
              <option value="Zakat Penghasilan dan Harta">Zakat Penghasilan dan Harta</option>
              <option value="Zakat Perniagaan">Zakat Perniagaan</option>
              <option value="Zakat Peternakan">Zakat Peternakan</option>
              <option value="Zakat Pertanian">Zakat Pertanian</option>
              <option value="Zakat Pertambangan">Zakat Pertambangan</option>
              <option value="Zakat Fitrah">Zakat Fitrah</option>
            </select>
            <hr>
          </div>
        </div>  
        <div class="mb-3">
          <label for="nominal" class="form-label">Nominal</label>
          <input type="text" class="form-control item-price mb-2" name="price" min=0 oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*?)\..*/g, '$1');" required />
        </div>
        <div class="mb-3 text-end">
          <button type="submit" class="btn btn-success">Submit</button>
        </div>
      </form>
    </div>
  </div>
</div>

{% put scripts %}
  <script type="text/javascript" src="{{ 'assets/js/simulator.js?ver=2.0.0'|theme }}"></script>
{% endput %}